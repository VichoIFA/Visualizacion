{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página principal</title>
    <script src="{% static 'chart.js' %}"></script>
    <link rel="stylesheet" href="{% static 'bootstrap-5.3.3-dist/css/bootstrap.min.css' %}">
    <style>
        .custom-navbar {
            background-color: #f5742a;
        }
        .sidebar {
            height: 720px;
            width: 190px;
            background-color: #ff8a30;
            color: #000000;
            box-shadow:-3px 0 10px 0 #555;
        }
        .sidebar .nav-link {
            font-size: 18px;
            color: #000000; 
            font-weight: bold;
        }
        .sidebar .nav-link:hover {
            background-color: #fc8128; 
            color: #000000; 
        }
        body {
            background-color: #e8e8e8;
        }
        .card {
            height: 550px; 
        }
        #mainChart {
            width: 100% !important; 
            height: 100% !important; 
        }
    </style>
</head>

<body>
    <nav class="navbar custom-navbar"  style = "border-bottom: 5px solid #e8e8e8;">
        <div class="container-fluid d-flex align-items-center">
            <a class="navbar-brand d-flex align-items-center" href="#">
                <img src="{% static 'images/logo.png' %}" alt="Logo" width="60" height="55" class="d-inline-block align-text-top">
                <h3 class="mb-0 ms-2">Mayorista 9</h3>
            </a>

            <div class="d-flex ms-2">
                <span class="clickable-text ms-3">
                    <h6 class="mb-0">Perfil</h6>
                </span>
                <span class="clickable-text ms-3">
                    <h6 class="mb-0">Configuración</h6>
                </span>
                <span class="clickable-text ms-3">
                    <h6 class="mb-0">Recursos</h6>
                </span>
            </div>

            <img src="{% static 'images/perfil.png' %}" alt="Descripción de la imagen" width="50" height="50" class="rounded-circle">   
        </div>
            <style>
        .clickable-text {
            cursor: pointer;
        }
    </style>
    </nav>

    <div class="container-fluid" style = "border-bottom: 2px solid #e8e8e8; border-right:  2px solid #e8e8e8;">
        <div class="row">
            <nav class="col-md-3 col-lg-2 sidebar d-none d-md-block" style = "padding-left:5px;">
                <div class="position-sticky">
                    <h5 class="p-3">Menú</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#">Inicio</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Dashboard 1</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Dashboard 2</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Dashboard 3</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4" style="padding-top: 400px ;">
                <div class="d-flex justify-content-between align-items-center" style="height: 200px;">
                    <!-- Primer gráfico -->
                    <div class="card text-center shadow-lg" style="border-radius: 15px; overflow: hidden; width: 45%; height: 190%;">
                        <div class="card-header text-white" style="background-color: gray;">
                            <h5 class="card-title mb-0">Compras (en millones) por rango de edad - Producto 1</h5>
                        </div>
                        <div class="card-body p-4 bg-light" styel= "max-width: 52%;">
                            <canvas id="mainChart"></canvas>
                        </div>
                    </div>

                    <!-- Segundo gráfico -->
                    <div class="card text-center shadow-lg" style="border-radius: 15px; overflow: hidden; width: 45%; height: 190%;  margin-right: 30px;">
                        <div class="card-header text-white" style="background-color: gray;">
                            <h5 class="card-title mb-0">Compras de Soleros segun categoría de ciudad</h5>
                        </div>
                        <div class="card-body p-4 bg-light" styel="height: 100px;">
                            <canvas id="mainChart2"></canvas>
                        </div>
                    </div>
                </div>

                <script>
                    document.addEventListener("DOMContentLoaded", function () {
                        const mainChartData1 = {
                            labels: {{ labels1|safe }},
                            datasets: [
                                {
                                    label: 'Producto 1',
                                    data: {{ producto1|safe }},
                                    backgroundColor: '#CE2024',
                                    borderColor: '#CE2024',
                                    borderWidth: 1
                                },
                                {
                                    label: 'Producto 2',
                                    data: {{ producto2|safe }},
                                    backgroundColor: '#11D6C3',
                                    borderColor: '#11D6C3',
                                    borderWidth: 1
                                },
                                {
                                    label: 'Producto 3',
                                    data: {{ producto3|safe }},
                                    backgroundColor: '#DEE810',
                                    borderColor: '#DEE810',
                                    borderWidth: 1
                                }
                            ]
                        };

                        var mainChartCtx1 = document.getElementById('mainChart').getContext('2d');
                        var mainChart1 = new Chart(mainChartCtx1, {
                            type: 'bar',
                            data: mainChartData1,
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                scales: {
                                    x: {
                                        title: {
                                            display: true,
                                            text: 'Rango de Edad'
                                        }
                                    },
                                    y: {
                                        title: {
                                            display: true,
                                            text: 'Compras (en millones)'
                                        },
                                        beginAtZero: true
                                    }
                                }
                            }
                        });
                    });

                    document.addEventListener("DOMContentLoaded", function () {
                        const mainChartData2 = {
                            labels: {{ labels2|safe }},
                            datasets: [
                                {
                                    label: 'Solteros',
                                    data: {{ solteros|safe }},
                                    backgroundColor: ["#e36200", "#34de00", "#b500de"],
                                    borderColor: ["#e36200", "#34de00", "#b39200"],
                                    borderWidth: 1
                                }
                            ]
                        };

                        var mainChartCtx2 = document.getElementById('mainChart2').getContext('2d');
                        var mainChart2 = new Chart(mainChartCtx2, {
                            type: 'bar',
                            data: mainChartData2,
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        display: false // Oculta la leyenda
                                    }
                                },
                                scales: {
                                    x: {
                                        title: {
                                            display: true,
                                            text: 'Categoría de ciudad'
                                        }
                                    },
                                    y: {
                                        title: {
                                            display: true,
                                            text: 'Compras de Solteros'
                                        },
                                        beginAtZero: true
                                    }
                                }
                            }
                        });
                    });
                </script>
            </main>
        </div>
    </div>
</body>
</html>
